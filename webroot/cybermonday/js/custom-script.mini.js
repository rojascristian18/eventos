var limit=10,offset=0,request=!0,finishR=!1,params="";$.extend({app:{plugins:function(){function t(){try{return document.createEvent("TouchEvent"),!0}catch(t){return!1}}$(".header-search-input").focus(function(){$(this).parents("div").eq(0).addClass("header-search-wrapper-focus"),$(this).siblings("label, i").addClass("active")}).blur(function(){$(this).parents("div").eq(0).removeClass("header-search-wrapper-focus"),$(this).siblings("label, i").removeClass("active")}),$(".dropdown-button").dropdown({inDuration:300,outDuration:125,constrain_width:!1,hover:!1,alignment:"left",gutter:0,belowOrigin:!0}),$(".fono-button").dropdown({inDuration:300,outDuration:225,constrain_width:!1,hover:!1,gutter:0,belowOrigin:!0,alignment:"left"}),$(".email-button").dropdown({inDuration:300,outDuration:225,constrain_width:!1,hover:!1,gutter:0,belowOrigin:!0,alignment:"left"}),$(".whatsapp-button").dropdown({inDuration:300,outDuration:225,constrain_width:!1,hover:!1,gutter:0,belowOrigin:!0,alignment:"left"}),$(".leftside-navigation ul.collapsible .collapsible-body li.active").each(function(){$(this).parents(".bold").eq(0).find(".collapsible-header").eq(0).trigger("click")}),$(".sidebar-collapse").sideNav({edge:"left"}),$("select").material_select(),$("select").not(".disabled").material_select();var e=$(".page-topbar").height(),o=window.innerHeight-e;$(".leftside-navigation").height(o).perfectScrollbar({suppressScrollX:!0});var n=$("#chat-out").height();$(".rightside-navigation").height(n).perfectScrollbar({suppressScrollX:!0}),t()&&$("#nav-mobile").css({overflow:"auto"}),$("#to-detail").on("click",function(){$("html, body").animate({scrollTop:$(".product-description").offset().top-$("#header").height()},1e3)}),$.fn.autocomplete=function(t){var e={data:{},limit:1/0,onAutocomplete:null,minLength:1};return t=$.extend(e,t),this.each(function(){var e,o=$(this),n=t.data,i=0,a=-1,r=o.closest(".input-field");if($.isEmptyObject(n))o.off("keyup.autocomplete focus.autocomplete");else{var c,l=$('<ul class="autocomplete-content dropdown-content"></ul>');r.length?(c=r.children(".autocomplete-content.dropdown-content").first(),c.length||r.append(l)):(c=o.next(".autocomplete-content.dropdown-content"),c.length||o.after(l)),c.length&&(l=c);var s=function(t,e){var o=e.find("img"),n=e.text().toLowerCase().indexOf(""+t.toLowerCase()),i=n+t.length-1,a=e.text().slice(0,n),r=e.text().slice(n,i+1),c=e.text().slice(i+1);e.html("<span>"+a+"<span class='highlight'>"+r+"</span>"+c+"</span>"),o.length&&e.prepend(o)},u=function(){a=-1,l.find(".active").removeClass("active")},d=function(){l.empty(),u(),e=void 0};o.off("blur.autocomplete").on("blur.autocomplete",function(){d()}),o.off("keyup.autocomplete focus.autocomplete").on("keyup.autocomplete focus.autocomplete",function(a){i=0;var r=o.val().toLowerCase();if(13!==a.which&&38!==a.which&&40!==a.which){if(e!==r&&(d(),r.length>=t.minLength))for(var c in n)if(n.hasOwnProperty(c)&&-1!==c.toLowerCase().indexOf(r)){if(i>=t.limit)break;var u=$("<li></li>");n[c]?u.append('<img src="'+n[c]+'" class="right circle"><span>'+c+"</span>"):u.append("<span>"+c+"</span>"),l.append(u),s(r,u),i++}e=r}}),o.off("keydown.autocomplete").on("keydown.autocomplete",function(t){var e,o=t.which,n=l.children("li").length,i=l.children(".active").first();return 13===o&&a>=0?(e=l.children("li").eq(a),void(e.length&&(e.trigger("mousedown.autocomplete"),t.preventDefault()))):void((38===o||40===o)&&(t.preventDefault(),38===o&&a>0&&a--,40===o&&n-1>a&&a++,i.removeClass("active"),a>=0&&l.children("li").eq(a).addClass("active")))}),l.off("mousedown.autocomplete touchstart.autocomplete").on("mousedown.autocomplete touchstart.autocomplete","li",function(){var e=$(this).text().trim();o.val(e),o.trigger("change"),d(),"function"==typeof t.onAutocomplete&&t.onAutocomplete.call(this,e)})}})},$(".header-search-input").autocomplete({data:productosJson,limit:20,onAutocomplete:function(t){$(".header-search-input:visible").parents("form").eq(0).submit()},minLength:1})},imagenes:{bind:function(){$(".img-product-container .mini img").on("click",function(){$este=$(this),$(".img-product-container .mini img").css("border","none"),$este.css({border:"1px solid #F55A00"}),$(".img-product-container .cover img").attr("src",$este.data("full"))})},init:function(){$(".img-product-container").length&&$.app.imagenes.bind()}},comprar:{bind:function(){var t=$(".input-quantity"),e=t.val(),o=parseInt(t.data("max")),n=1;$(".btn-add").on("click",function(){o>e&&(e=parseInt(e)+1,t.val(e))}),$(".btn-remove").on("click",function(){e>n&&(e=parseInt(e)-1,t.val(e))})},init:function(){$("#ComprarProductForm").length&&$.app.comprar.bind()}},filtro:{bind:function(){$("#filtroMarcas").val(arrMarcas),$("#filtroPrecios").val(filtroPrecio),$("#filtroDescuento").val(filtroDescuento),$.app.productos.obtenerProductos()},init:function(){$("#filtro").length&&$.app.filtro.bind()}},slider:{bind:function(){$(".slider").slider({height:250,interval:5e3})},init:function(){$(".slider").length&&$.app.slider.bind()}},cargando:{mostrar:function(){var t='<div id="preloader-product" class="progress"><div class="indeterminate"></div></div>';$("#products").append(t)},ocultar:function(){$("#preloader-product").remove()}},productos:{obtenerCantidad:function(){var t=document.location.search;$.get(webroot+"eventos/ajax_count_products/"+t,function(t){var e='<div class="container"><div class="row"><div class="col s12"><h5>'+t+" resultado/os encontrado/os</h5>";$("#cantidad-resultados").html(e)}).fail(function(){})},obtenerProductos:function(){request=!1,$.app.cargando.mostrar();var t=document.location.search;if(finishR){$.app.cargando.ocultar();var e='<div class="col s12 center-align"><h6 class="grey-text lighten-2">No hay más resultados</h6></label></div>';$("#products").append(e),$("#btn-load-more").html("")}else $.get(webroot+"eventos/ajax_get_products/"+limit+"/"+offset+t,function(t){if(t.length<2){finishR=!0,$.app.cargando.ocultar();var e='<div class="col s12 center-align"><h6 class="grey-text lighten-2">No hay más resultados</h6></label></div>';$("#products").append(e),$("#btn-load-more").html("")}else{$("#products").append(t),$(".product:hidden").fadeIn(0,function(){$(this).children(".card").animate({bottom:0,opacity:1},500)}),offset+=10,request=!0;var o='<button id="more-products" class="btn naranjo waves-effect waves-light col s12" type="submit"><i class="fa fa-refresh"></i> Cargar 10 herramientas más</button>';$("#btn-load-more").html(o),$.app.cargando.ocultar()}}).fail(function(){$.app.cargando.ocultar()})},bind:function(){$(document).on("click","#more-products",function(){$.app.productos.obtenerProductos()})},init:function(){$("#products").length&&$.app.productos.bind()}},init:function(){$.app.comprar.init(),$.app.productos.init(),$.app.slider.init(),$.app.filtro.init(),$.app.imagenes.init(),$.app.plugins()}}}),$(document).ready(function(){$.app.init()});